{% include 'dashboard/bootstrap4.html' %}
{% include 'dashboard/navbar.html' %}

<style>
  .flex-container {
    display: flex;
}

.flex-child {
    flex: 1;
    border: 2px solid blue;
}  

.flex-child:first-child {
    margin-right: 20px;
} 
</style>



<head>

<div class="jumbotron">
  <h1 class="display-4">US Covid Dashboard</h1>
  <p class="lead">This is my project for IBM. Working on this for the past week has been extremely educational and fulfilling, and I look foward
  to continuing this project. Due to the time constraints and other work, there are a number of things I was not able to implement in time, but am excited to continue to work to implement them.  Some of those things are render multiple graphs on the home page, continue to implement the rest framework, implemnt a search bar for the tables, and allow grouping of the table data.  </p>
  <hr class="my-4">
  <p>Use the button below to learn more about this websites developer</p>
  <p class="lead">
    <a class="btn btn-primary btn-lg" href="https://www.linkedin.com/in/joshparker99" role="button">Learn more</a>
  </p>
</div>
</head>

 
<body>
  <script>
{% block jquery%}
function get_random_color() {
    var h = rand(1, 360);
    var s = rand(50, 80);
    var l = rand(50, 90);

    return 'rgb(' + h + ',' + s + ',' + l + ')';
  }
var endpoint='/api/statechart1/data'
var tableData=[]
var chartlabel=[]
$.ajax({
  method: "GET",
  url: endpoint,
  success: function(data) {
    console.log(data)
    tableData = data.dataView
    chartlabels = data.labelsView
    var ctx= document.getElementById('myChart')
    var myChart = new Chart(ctx, {
      type:'bar',
      data: {
        labels: chartlabels,
        datasets: [{
          label: data.chartLabel,
          data: tableData,
          backgroundColor: 'blue',
          bordercolor: 'grey',
    
          
        

        }]
      }

    })
  },
  error: function(error_data) {
    console.log("error")
    console.log(error_data)
  }
  
})
var endpoint='/api/nationalchart1/data'
var tableData=[]
var chartlabel=[]
$.ajax({
  method: "GET",
  url: endpoint,
  success: function(data) {
    console.log(data)
    tableData = data.dataView
    chartlabels = data.labelsView
    var ctx= document.getElementById('myChart2')
    var myChart = new Chart(ctx, {
      type:'bar',
      data: {
        labels: chartlabels,
        datasets: [{
          label: data.chartLabel,
          data: tableData,
          backgroundColor: 'blue',
          bordercolor: 'grey',

        

        }]
      }

    })
  },
  error: function(error_data) {
    console.log("error")
    console.log(error_data)
  }
  
})
var endpoint='/api/statechart2/data'
var tableData=[]
var chartlabel=[]
$.ajax({
  method: "GET",
  url: endpoint,
  success: function(data) {
    console.log(data)
    tableData = data.dataView
    chartlabels = data.labelsView
    var ctx= document.getElementById('myChart3')

    var myChart = new Chart(ctx, {
      type:'bar',
      data: {
        labels: chartlabels,
        datasets: [{
          label: data.chartLabel,
          data: tableData,
          backgroundColor: 'blue',

          bordercolor: 'grey',

        

        }]
      }

    })
  },
  error: function(error_data) {
    console.log("error")
    console.log(error_data)
  }
  
})
var endpoint='/api/nationalchart2/data'
var tableData=[]
var chartlabel=[]
$.ajax({
  method: "GET",
  url: endpoint,
  success: function(data) {
    console.log(data)
    tableData = data.dataView
    chartlabels = data.labelsView
    var ctx= document.getElementById('myChart4')
    var myChart = new Chart(ctx, {
      type:'line',
      data: {
        labels: chartlabels,
        datasets: [{
          label: data.chartLabel,
          data: tableData,
          backgroundColor: 'blue',
          bordercolor: 'grey',


        }]
      }

    })
  },
  error: function(error_data) {
    console.log("error")
    console.log(error_data)
  }
  
})
$('.carousel').carousel()


{% endblock %}
</script>

 
<div class='row'>
  <div class='col-sm-3'>
    <canvas id="myChart" width="400" height="400"></canvas>
  </div>
  <div class='col-sm-3'>
    <canvas id="myChart2" width="400" height="400"></canvas>
  </div>

<div class='col-sm-3'>
    <canvas id="myChart3" width="400" height="400"></canvas>
  </div>
  <div class='col-sm-3'>
    <canvas id="myChart4" width="400" height="400"></canvas>
  </div>
  </div>

<div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img class="d-block w-100" src="..." alt="First slide">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="..." alt="Second slide">
    </div>
    <div class="carousel-item">
      <img class="d-block w-100" src="..." alt="Third slide">
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>

</div>


 <!-- TODO: Get additional graphs to render properly -->
</body>

<!--Only show the upload CSV file optuion to admin users -->
{% if request.user.is_staff %}
    <div id="upload"class="card" style="width: 25rem; height: 8rem, ">
        <div class="card-body">
            <h6 class="card-title">STAFF ONLY:</h6>
            <p class="card-text">Found a better CSV file, upload here</p>
            <a href="/upload-state-csv/" class="card-link">State Table</a>
            <a href="/upload-nation-csv/" class="card-link">Nation Table</a>
        </div>
    </div>
    {% endif %}